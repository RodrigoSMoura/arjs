(this["webpackJsonparjs-react-app"]=this["webpackJsonparjs-react-app"]||[]).push([[0],{33:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),r=n(18),o=n.n(r),i=n(13),s=n(16),u=n(4),l=n(8),d=n(14),p=n.n(d),f=n(19),g=n(10),m=(n(28),n(20)),b=n.n(m),h={apiKey:"AIzaSyBvC4MySbJ4bhRs7BubZXMvNnFqpbboy4A",authDomain:"arjs-acc1c.firebaseapp.com",databaseURL:"https://arjs-acc1c-default-rtdb.firebaseio.com",projectId:"arjs-acc1c",storageBucket:"arjs-acc1c.appspot.com",messagingSenderId:"382924732548",appId:"1:382924732548:web:1adf43cc774a02cff1ead1"};function j(){var e=g.a.database().ref("points"),t=!1;function n(){return a.apply(this,arguments)}function a(){return(a=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,e.get().then((function(e){e.forEach((function(e){var t=e.val();n.push(t)}))})).catch((function(e){n=[{id:2,imageUrl:"https://raw.githubusercontent.com/RodrigoSMoura/ARjsTests/main/docs/LOGO-ILHA.png",latitude:"-11.0111058",linkUrl:"https://www.instagram.com/ilhaenterprise/",longitude:"-37.0909365",name:"Ilha 2"}]}));case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{GetPoints:n,RegisterChange:function(e){return setInterval((function(){t||n().then((function(t){if(console.log(t),t){var n=JSON.parse(window.localStorage.getItem("points"));n||(n=[]),n=n.concat(t.filter((function(e){return void 0===this.find((function(t){return t.id===e.id}))}),n)),window.localStorage.setItem("points",JSON.stringify(n)),console.log("vou chamar"),e(),console.log("chamei")}}))}),1e4)},InsertPoint:function(t){t.id=b()();var n=e.push();n.set(t),console.log(n.toString())},CancelToken:function(e){t=!0,e&&clearInterval(e)}}}g.a.apps.length||g.a.initializeApp(h);var v=n(2),O=j();function y(e){var t=e.peakFinderKey,n=e.scale,c=e.latitude,r=e.longitude,o=e.imgSrc;return Object(a.useEffect)((function(){window.AFRAME.registerComponent("peakfinder='".concat(t,"'"),{init:function(){this.el.addEventListener("mouseup",(function(e){e.preventDefault(),console.log("HELLO")}))},remove:function(){console.log("removido")}});return function(){delete window.AFRAME.components["peakfinder='".concat(t,"'")],console.log("EntityLocalization removido")}}),[]),Object(v.jsx)(l.Entity,{peakfinder:t,"look-at":"[gps-camera]",scale:"".concat(n,", ").concat(n,", ").concat(n),"gps-entity-place":"latitude: ".concat(c,"; longitude: ").concat(r),children:Object(v.jsx)(l.Image,{width:"1",height:"1",src:o,crossorigin:"anonymous"})})}var w=function(){var e,t=c.a.useRef([]),n=c.a.useState([]),r=Object(u.a)(n,2),o=r[0],d=r[1],p=c.a.useState(5),f=Object(u.a)(p,2),g=f[0],m=f[1],b=c.a.useState([]),h=Object(u.a)(b,2);function j(){var e=JSON.parse(window.localStorage.getItem("points"));try{if(e&&e.length){var t=e.filter((function(e){return void 0===o.find((function(t){return t.key!==e.id}))}));t.length&&d([].concat(Object(s.a)(o),Object(s.a)(t.map((function(e){return Object(v.jsx)(y,{peakFinderKey:"peakfinder-".concat(e.id),scale:g,latitude:e.latitude,longitude:e.longitude,imgSrc:e.imageUrl},e.id)})))))}}catch(n){console.log(n)}}return h[0],h[1],Object(a.useEffect)((function(){m(5),j();var e=O.RegisterChange((function(){j()}));return function(){clearInterval(e),document.querySelector("video").remove()}}),[]),c.a.useCallback((function(){alert(t)}),[t]),Object(v.jsxs)(l.Scene,{"vr-mode-ui":"enabled: false",raycaster:"objects: [".concat("peakfinder-1","]"),embedded:!0,arjs:"sourceType: webcam; debugUIEnabled: false;",children:[o,Object(v.jsxs)(l.Entity,(e={camera:!0,"gps-camera":!0,"rotation-reader":!0,"look-controls-enabled":"true","arjs-look-controls":"smoothingFactor: 1"},Object(i.a)(e,"gps-camera","gpsMinDistance: 5"),Object(i.a)(e,"children",[Object(v.jsx)(l.Entity,{cursor:"fuse: false",position:"0 0 -1",geometry:"primitive: ring; radiusInner: 0.01; radiusOuter: 0.01",children:" "})," "]),e))]})};var S=function(){return Object(v.jsx)(w,{})};j();o.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(S,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.13f9878e.chunk.js.map